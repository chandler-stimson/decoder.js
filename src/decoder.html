<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <input type="button" value="Loading..." id="play" disabled>
  <script type="text/javascript">
    var Module = {};
    document.getElementById('play').onclick = async () => {
      const play = o => {
        console.log(o);
        const source = o.context.createBufferSource();
        source.buffer = o.audioBuffer;
        source.connect(o.context.destination);
        source.start();
      };

      for (const name of ['input.wma', 'input.mp4']) {
        await Module.decode({
          name,
          href: '../inputs/' + name
        }).then(play).catch(e => console.error('error', e))
      }
    };
    Module.onRuntimeInitialized = function() {
      document.getElementById('play').value = 'Play';
      document.getElementById('play').disabled = false;
    };
  </script>
  <script type="text/javascript" src="decoder.js"></script>
</body>
</html>
